<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dr. Sandro Pereira | Agendamento via WhatsApp</title>
  <meta name="description" content="Agendamento via WhatsApp - Dr. Sandro Pereira" />
  <meta name="theme-color" content="#07282b" />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-dark:#07282b;
      --petrol:#0f4b4d;
      --gold:#c39b3b;
      --muted:#b9c3c4;
      --card:#ffffff;
      --text-dark:#0b2b2b;
      --text-light:#eef6f6;
      --maxw:1100px;
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family:'Lato',system-ui,-apple-system,'Segoe UI',Roboto,Arial;
      background:
        linear-gradient(to bottom,
          rgba(7,40,43,0) 0%,
          rgba(7,40,43,0.35) 35%,
          rgba(7,40,43,0.70) 70%,
          rgba(7,40,43,0.92) 100%
        ),
        url('img/fundo1.jpeg') no-repeat left top,
        linear-gradient(180deg,var(--bg-dark),var(--petrol));
      background-size: auto 85vh;
      color:var(--text-light);
      padding:20px;
    }
    .container{max-width:var(--maxw);margin:0 auto}
    header{display:flex;justify-content:space-between;align-items:center;padding:10px 0}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,var(--gold),#063739);display:flex;align-items:center;justify-content:center;color:var(--bg-dark);font-weight:700;font-family:'Cinzel',serif}
    nav{display:flex;gap:10px;align-items:center}
    .btn{background:var(--gold);color:var(--bg-dark);padding:10px 14px;border-radius:999px;text-decoration:none;font-weight:700}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.08);padding:8px 12px;border-radius:10px;color:var(--text-light);text-decoration:none}
    .hero{display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center;padding:22px 0;min-height:420px}
    h1{font-family:'Cinzel',serif;font-size:clamp(26px,4vw,40px);margin:0;color:var(--text-light)}
    .lead{font-size:clamp(15px,1.8vw,18px);color:var(--muted);margin-top:10px}
    .card{background:var(--card);color:var(--text-dark);border-radius:var(--radius);padding:18px;box-shadow:0 12px 30px rgba(0,0,0,0.18)}
    .avatar{width:140px;height:140px;border-radius:50%;overflow:hidden;flex:0 0 140px}
    label{display:block;font-weight:600;font-size:13px;margin-bottom:6px}
    input,textarea,select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e6e6;margin-bottom:10px;font-size:14px}
    .small{font-size:13px;color:var(--muted)}
    .row{display:flex;gap:8px}
    .row > div{flex:1}
    .note-success{background:#e6ffef;border:1px solid #9eedc0;padding:10px;border-radius:8px;color:#0a6b3d;margin-top:12px}
    .note-error{background:#ffecec;border:1px solid #ffb3b3;padding:10px;border-radius:8px;color:#7a1a1a;margin-top:12px}
    .actions-inline{display:flex;gap:8px;margin-top:8px}
    .whatsapp-btn{background:var(--gold);color:var(--petrol);padding:10px 12px;border-radius:10px;font-weight:700;border:none;cursor:pointer}
    @media (max-width:900px){.hero{grid-template-columns:1fr;min-height:auto}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">SP</div>
        <div>
          <div style="font-weight:700;color:var(--text-light)">Dr. Sandro Pereira</div>
          <div class="small">Do al√≠vio ao equil√≠brio ‚Äî CRM/RS 61741</div>
        </div>
      </div>

      <nav>
        <a class="btn-ghost" href="#sobre">Sobre</a>
        <a class="btn-ghost" href="#como">Como funciona</a>
        <a class="btn" href="#agende">Agendar</a>
      </nav>
    </header>

    <main class="hero" role="main">
      <div>
        <h1>Consulta online ‚Äî agende pelo WhatsApp</h1>
        <p class="lead">R√°pido, pr√°tico e direto para o n√∫mero de atendimento. Preencha os dados e ao clicar em "Solicitar Agendamento" abriremos o WhatsApp com a mensagem completa.</p>
      </div>

      <!-- NOVA CAIXA: Agendamento via WhatsApp -->
      <aside class="card" aria-labelledby="agende">
        <h3 id="agende" style="margin-top:0;font-family:'Cinzel',serif">Agendamento via WhatsApp</h3>
        <p class="small" style="margin-bottom:12px">Preencha o formul√°rio abaixo. Ao enviar, o WhatsApp abrir√° com a mensagem j√° preenchida para o n√∫mero <strong>+55 99 9007-0106</strong>.</p>

        <form id="form-agenda" novalidate>
          <label for="nome">Nome completo *</label>
          <input id="nome" name="nome" type="text" placeholder="Seu nome completo" required />

          <label for="email">E-mail *</label>
          <input id="email" name="email" type="email" placeholder="seu@exemplo.com" required />

          <label for="telefone">Telefone / WhatsApp</label>
          <input id="telefone" name="telefone" type="text" placeholder="(xx) xxxxx-xxxx" />

          <div class="row" aria-hidden="false">
            <div>
              <label for="data">Data preferencial</label>
              <input id="data" name="data" type="date" />
            </div>
            <div>
              <label for="hora">Hor√°rio preferencial</label>
              <input id="hora" name="hora" type="time" />
            </div>
          </div>

          <label for="mensagem">Mensagem / Sintomas</label>
          <textarea id="mensagem" name="mensagem" rows="3" placeholder="Breve descri√ß√£o (opcional)"></textarea>

          <div class="actions-inline" style="align-items:center;">
            <button id="waBtn" type="submit" class="whatsapp-btn" aria-label="Enviar via WhatsApp">Solicitar Agendamento</button>
          </div>

          <div id="form-notice" role="status" aria-live="polite"></div>
        </form>

        <div style="margin-top:12px;font-size:13px;color:var(--gold)">
          Ou abra diretamente: <a href="https://wa.me/55999070106?text=Ol%C3%A1%20Dr.%20Sandro" target="_blank" rel="noopener" style="color:var(--bg-dark);text-decoration:none">(55) 99907-0106</a>
        </div>
      </aside>
    </main>

    <!-- info / sobre (resumido) -->
    <section id="sobre" style="padding-top:20px">
      <div class="card">
        <h4 style="margin-top:0;font-family:'Cinzel',serif;color:var(--petrol)">Sobre</h4>
        <p style="color:var(--text-dark)">Sou o Dr. Sandro Pereira. Atendimento por consulta online com foco no diagn√≥stico da dor e plano terap√™utico personalizado.</p>
      </div>
    </section>

    <footer style="margin-top:18px;color:var(--muted)">
      <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <div><strong>Dr. Sandro Pereira</strong> ‚Äî CRM/RS 61741</div>
        <div class="small">E-mail: <a href="mailto:arsandrodoc@gmail.com" style="color:var(--muted)">arsandrodoc@gmail.com</a> ‚Ä¢ (55) 99907-0106</div>
      </div>
    </footer>
  </div>

  <script>
    (function(){
      const WHATSAPP_NUMBER = '55999070106'; // destino sem + ou espa√ßos
      const form = document.getElementById('form-agenda');
      const notice = document.getElementById('form-notice');
      const waBtn = document.getElementById('waBtn');

      function setNotice(type, text){
        notice.innerHTML = '';
        const div = document.createElement('div');
        div.className = type === 'success' ? 'note-success' : 'note-error';
        div.textContent = text;
        notice.appendChild(div);
      }

      function formatMessage(fields){
        const lines = [
          'üìÖ *Pedido de Agendamento*',
          '--------------------------------',
          `*Nome:* ${fields.nome}`,
          `*E-mail:* ${fields.email}`,
          `*Telefone:* ${fields.telefone || '-'}`,
          `*Data preferencial:* ${fields.data || '-'}`,
          `*Hor√°rio preferencial:* ${fields.hora || '-'}`,
          '',
          '*Mensagem / Sintomas:*',
          `${fields.mensagem || '-'}`,
          '',
          '(Enviado via formul√°rio do site)'
        ];
        return lines.join('\n');
      }

      function encodeForWhatsApp(text){
        return encodeURIComponent(text).replace(/%20/g, '+');
      }

      function getFields(){
        return {
          nome: document.getElementById('nome').value.trim(),
          email: document.getElementById('email').value.trim(),
          telefone: document.getElementById('telefone').value.trim(),
          data: document.getElementById('data').value,
          hora: document.getElementById('hora').value,
          mensagem: document.getElementById('mensagem').value.trim()
        };
      }

      // validar e abrir WhatsApp
      form.addEventListener('submit', function(e){
        e.preventDefault();
        setNotice('', '');

        const f = getFields();

        if(!f.nome || !f.email){
          setNotice('error', 'Por favor, preencha ao menos Nome e E-mail.');
          return;
        }
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if(!re.test(f.email)){
          setNotice('error', 'E-mail em formato inv√°lido.');
          return;
        }
        if((f.data && !f.hora) || (!f.data && f.hora)){
          setNotice('error', 'Por favor, informe Data e Hor√°rio juntos, ou deixe ambos em branco.');
          return;
        }

        const message = formatMessage(f);
        const encoded = encodeForWhatsApp(message);
        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encoded}`;

        const win = window.open(url, '_blank');
        if(!win){
          setNotice('error', 'O navegador bloqueou a abertura autom√°tica. Clique no link para abrir o WhatsApp: ' + url);
        } else {
          setNotice('success', 'O WhatsApp foi aberto com a mensagem. Confirme o envio no app.');
        }
      });

      // permitir enviar com Enter quando o bot√£o estiver focado
      waBtn.addEventListener('keyup', function(e){
        if(e.key === 'Enter') waBtn.click();
      });

    })();
  </script>
</body>
</html>
